<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
    <meta name="keywords" content="hexo, autumn">
    <title>
        总结
    </title>
    <!-- favicon -->
    
    <link rel="icon" href="https://cdn.jsdelivr.net/gh/frontendsophie/hexo-theme-autumn@1.0.0/source/img/favicon.ico">
    
    <link rel="stylesheet" href="/css/style.css">

    <!-- highlight -->
    <link rel="stylesheet" href="https://cdn.bootcss.com/highlight.js/9.12.0/styles/github-gist.min.css">
    <script src="//cdn.bootcss.com/highlight.js/9.2.0/highlight.min.js"></script>
    <script>
        hljs.initHighlightingOnLoad()
    </script>
    <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/frontendsophie/hexo-infinite-scroll@1.0.0/dist/hexo-infinite-scroll.min.css">
    <script src="https://cdn.jsdelivr.net/gh/frontendsophie/hexo-infinite-scroll@1.0.0/dist/hexo-infinite-scroll.min.js"></script>
    <script>
        infiniteScroll()

        // for mobile menu
        $(function () {
            $('.social-button').click(function () {
                if ($('.social-links').hasClass('hide-links')) {
                    $('.social-links').removeClass('hide-links')
                } else {
                    $('.social-links').addClass('hide-links')
                }
            })
        })
    </script>
</head>

    <body style="background: rgba(10, 10, 10, 0.6)">
        <div class="container">
            <header class="header">
    <h1 class="title">
        <a href="/" class="logo">
            总结
        </a>
    </h1>
    <h2 class="desc">
        前端学习
    </h2>

    <nav class="links">
        <button class="social-button">
            menu
        </button>
        <ul class="social-links hide-links">
            
                <li>
                    <a href="https://github.com/Fatty-Fish">
                        Github
                    </a>
                </li>
                
        </ul>
    </nav>
</header>
                <main class="main">
                    <article class="post">
    
    
    
    <h2 class="post-title">
        http缓存
    </h2>
    <ul class="post-date">
        <li>
            2019-02-27
        </li>
        <li>
            权静
        </li>
    </ul>
    <div class="post-content">
        <p>分为强缓存和协商缓存；如果命中强缓存不会向服务器发送请求，如果没有命中强缓存，再发送请求头，看是否命中协商缓存，命中服务器返回304，浏览器在自己缓存中获取，如果没有命中协商缓存（缓存过期了），服务器会返回200，并返回新的过期时间和请求数据；</p>
<h4 id="强缓存"><a href="#强缓存" class="headerlink" title="强缓存"></a>强缓存</h4><h5 id="expires和catch-control"><a href="#expires和catch-control" class="headerlink" title="expires和catch-control"></a>expires和catch-control</h5><ol>
<li>expires是服务器生成的时间，会不准确；</li>
<li>catch-control有很多值，比如no-store:禁止缓存；no-catch禁止在与服务器进行新鲜度再验证之前，采用缓存内容；max-age=100：缓存多久，相对时间；<h4 id="协商缓存"><a href="#协商缓存" class="headerlink" title="协商缓存"></a>协商缓存</h4><h5 id="last-modified-if-modified-since"><a href="#last-modified-if-modified-since" class="headerlink" title="last-modified/if-modified-since"></a>last-modified/if-modified-since</h5>最后修改的日期；服务器生成last-modified，放入响应头中，浏览器拿到数据。存入缓存，并记下日期，浏览器再次有该请求时，会先看是否有last-modified字段，会在请求头中加上if-modified-since=上次服务器给的last-modified时间，发送给服务器，服务器校验是否过期，如果这个时间&lt;服务器中最后一次被定义地时间，则过期，服务器会返回200状态码，并返回最新的数据和生成最新的last-modified；如果没有过期，返回304状态码，浏览器从自己的缓存获取数据；<h5 id="etag-if-none-match"><a href="#etag-if-none-match" class="headerlink" title="etag/if-none-match"></a>etag/if-none-match</h5>服务器生成etag，是一个根据数据内容生成的特殊标识，和last-modified一样。浏览器再次有同样的请求时，会先看看是否有etag，如果有，携带if-none-match=上次服务器给的etag标识的请求头，发送给服务器验证，所请求的数据是否标识改变，服务器判断，如果改变，返回200状态码，新数据和新的etag，如果没有更改，返回304状态码，浏览器从自己的缓存中获取数据。<h5 id="区别"><a href="#区别" class="headerlink" title="区别"></a>区别</h5>expires是服务器生成的日期，可能不准确，在http1.1版本新增了catch-control，优先级更高。<br>last-modified是秒级的时间，而有些数据内容可能更新时间小于秒，这会导致不能获取最新数据；有些数据是周期性生成，但内容并没有改变，时间检测更新会浪费资源；etag是服务器根据数据内容生成的唯一标识，可以解决；etag是http1.1版本新增，优先级更高；</li>
</ol>

    </div>
</article>
                </main>
                <aside class="aside">
                    <section class="aside-section">
                        
    <h1>Categories</h1>

    

                    </section>
                    <section class="aside-section">
                        
    <h1>Archives</h1>

    <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/">2019</a></li></ul>


                    </section>
                    <section class="aside-section tag">
                        
    <h1>Tags</h1>

    <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/">css</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/note/">note</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/总结/">总结</a><span class="tag-list-count">9</span></li></ul>

                    </section>
                </aside>
        </div>
    </body>

</html>